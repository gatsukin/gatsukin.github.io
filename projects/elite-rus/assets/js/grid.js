const viewToggle=document.getElementById("viewType");let viewToggleEvent=["load","DOMContentLoaded"];if(document.getElementById("IndexGrid")){var IndexGridMsnry=new Masonry("#IndexGrid",{itemSelector:".card",horizontalOrder:!0,transitionDuration:".2s"});let iGrid=document.getElementById("IndexGrid"),iWrap=document.getElementById("IndexWrap"),toggleClasses=function(){viewToggle.checked?(iGrid.classList.remove("grid"),iGrid.classList.add("list"),iWrap.classList.add("list-wrap"),IndexGridMsnry.destroy()):(iGrid.classList.add("grid"),iGrid.classList.remove("list"),iWrap.classList.remove("list-wrap"),new Masonry("#IndexGrid",{itemSelector:".card",horizontalOrder:!0,transitionDuration:".2s"}))};for(let i=0;i<viewToggleEvent.length;i++){const event=viewToggleEvent[i];window.addEventListener(event,toggleClasses),viewToggle.addEventListener("change",toggleClasses)}}if(document.getElementById("OftenViewed"))var OftenViewedMsnry=new Masonry("#OftenViewed",{itemSelector:".card",horizontalOrder:!0,transitionDuration:".2s"});if(document.getElementById("PreviouslyViewed"))var PreviouslyViewedMsnry=new Masonry("#PreviouslyViewed",{itemSelector:".card",horizontalOrder:!0,transitionDuration:".2s"});if(document.getElementById("lkGrid"))var lkGridMsnry=new Masonry("#lkGrid",{itemSelector:".card",horizontalOrder:!0,transitionDuration:".2s"});function setIntervalX(callback,delay,repetitions){var x=0,intervalID=window.setInterval(function(){callback(),++x===repetitions&&window.clearInterval(intervalID)},delay)}function gridFunc(){document.getElementById("IndexGrid")&&!viewToggle.checked&&IndexGridMsnry.layout(),document.getElementById("OftenViewed")&&OftenViewedMsnry.layout(),document.getElementById("PreviouslyViewed")&&PreviouslyViewedMsnry.layout(),document.getElementById("lkGrid")&&lkGridMsnry.layout()}let pageEvents=["load","DOMContentLoaded"];for(let i=0;i<pageEvents.length;i++){const event=pageEvents[i];gridFunc(),window.addEventListener(event,function(){setIntervalX(function(){gridFunc()},300,3)})}function niceJoing(selection){for(var events=["load","scroll","resize"],show=!0,selector=document.querySelector(selection,events),i=0;i<events.length;i++)window.addEventListener(events[i],function(){if(!show)return!1;var scrollHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),elRect=selector.getBoundingClientRect(),w_top=window.pageYOffset,e_top=elRect.top+window.pageYOffset,w_height=document.documentElement.clientHeight,d_height=scrollHeight,e_height=selector.offsetHeight;(w_top+w_height>=e_top||w_height+w_top==d_height||e_height+e_top<w_height)&&(show=!1,gridFunc())})}viewToggle.addEventListener("change",function(){gridFunc(),setIntervalX(function(){gridFunc()},300,3)}),document.getElementById("IndexGrid")&&!viewToggle.checked&&niceJoing("#IndexGrid"),document.getElementById("OftenViewed")&&niceJoing("#OftenViewed"),document.getElementById("PreviouslyViewed")&&niceJoing("#PreviouslyViewed"),document.getElementById("lkGrid")&&niceJoing("#lkGrid");let cardMassive=document.querySelectorAll(".card");for(let i=0;i<cardMassive.length;i++){const el=cardMassive[i];function openCard(){el.classList.contains("nonopen")||(el.classList.toggle("opened"),setIntervalX(function(){gridFunc()},100,3))}if(el.querySelector(".card--img")){el.querySelector(".card--img").addEventListener("click",openCard)}if(el.querySelector(".card__main--title")){el.querySelector(".card__main--title").addEventListener("click",openCard)}}