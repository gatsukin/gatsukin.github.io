"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}window.addEventListener("load",function(){var urlParams=new URLSearchParams(window.location.search);Array.from(urlParams.entries()).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0];_ref2[1];console.log("key",key),toggleModal(key)});var MENU_BTN=document.querySelector("#MenuToggle"),EXTRA_MENU=document.querySelector("#ExtraMenu");MENU_BTN.addEventListener("click",function(){MENU_BTN.classList.toggle("opened"),EXTRA_MENU.classList.toggle("opened")});var selector,speed,parentSelector,clone,firstElement,i,FOOTER_CATALOG_BTN=document.querySelector(".mob-dis"),FOOTER_MENULINKS=document.querySelector(".footer__menu--links");if(FOOTER_CATALOG_BTN.addEventListener("click",function(){FOOTER_MENULINKS.classList.toggle("extend")}),document.querySelector(".welcome-swiper"))new Swiper(".welcome-swiper",{loop:!0,pagination:{el:".welcome .swiper-pagination"},navigation:{nextEl:".welcome .swiper-button-next",prevEl:".welcome .swiper-button-prev"},on:{slideChange:function(){var index_currentSlide=this.realIndex;document.querySelector(".swiper-current-slide").innerHTML="0".concat(index_currentSlide+1)}}});if(document.querySelector(".cloth-category__swiper"))new Swiper(".cloth-category__swiper",{loop:!0,slidesPerView:"auto",spaceBetween:"6px",pagination:{el:".cloth-category__swiper .swiper-pagination"},navigation:{nextEl:".cloth-category__swiper .swiper-button-next",prevEl:".cloth-category__swiper .swiper-button-prev"}});if(document.querySelector(".news-detail-slider__swiper"))new Swiper(".news-detail-slider__swiper",{loop:!0,slidesPerView:"auto",spaceBetween:"6px",pagination:{el:".news-detail-slider__swiper .swiper-pagination"},navigation:{nextEl:".news-detail-slider__swiper .swiper-button-next",prevEl:".news-detail-slider__swiper .swiper-button-prev"}});if(document.querySelector(".product__slider")){var PRODUCT_SWIPER_THUMBS=new Swiper(".product__slider--thumbs",{spaceBetween:6,slidesPerView:"auto",freeMode:!0,watchSlidesProgress:!0,breakpoints:{0:{direction:"horizontal"},880:{direction:"vertical"}},on:{fromEdge:function(e){e.isBeginning||(e.el.classList.add("isEnd"),e.el.classList.remove("isBegin")),e.isEnd||(e.el.classList.add("isBegin"),e.el.classList.remove("isEnd"))}}});new Swiper(".product__slider--main",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:PRODUCT_SWIPER_THUMBS}})}if(document.querySelector(".news-main")){var NEWS_MAIN_SWIPER_THUMBS=new Swiper(".news-main__image",{slidesPerView:"1"});new Swiper(".news-main__text",{slidesPerView:"1",spaceBetween:100,navigation:{nextEl:".news-main-control .swiper-button-next",prevEl:".news-main-control .swiper-button-prev"},pagination:{el:".news-main-control .swiper-pagination"},thumbs:{swiper:NEWS_MAIN_SWIPER_THUMBS}})}document.querySelector("#NatureMarquee")&&(selector="#NatureMarquee",speed=1,parentSelector=document.querySelector(selector),clone=parentSelector.innerHTML,firstElement=parentSelector.children[0],i=0,parentSelector.insertAdjacentHTML("beforeend",clone),parentSelector.insertAdjacentHTML("beforeend",clone),setInterval(function(){firstElement.style.marginLeft="-".concat(i,"px"),i>firstElement.clientWidth&&(i=0),i+=speed},0));var SELECT_ARRAY=document.querySelectorAll("select"),SELECT_OPTION={placeholder:"Выберите вариант"};if(SELECT_ARRAY.forEach(function(select){NiceSelect.bind(select,_objectSpread({},SELECT_OPTION))}),document.getElementById("editProfileForm")){var phoneEl=document.getElementById("editProfileTel"),bDay=(IMask(phoneEl,{mask:"8 (000)-000-00-00"}),document.getElementById("editBday")),maskOptionsBday={mask:Date};IMask(bDay,maskOptionsBday)}if(document.querySelector(".payment-methods-page")){var cardNumber=document.getElementById("cardNumber"),expirationDate=document.getElementById("expirationDate"),securityCode=document.getElementById("securityCode");new IMask(cardNumber,{mask:[{mask:"0000 000000 00000",regex:"^3[47]\\d{0,13}",cardtype:"american express"},{mask:"0000 0000 0000 0000",regex:"^(?:6011|65\\d{0,2}|64[4-9]\\d?)\\d{0,12}",cardtype:"discover"},{mask:"0000 000000 0000",regex:"^3(?:0([0-5]|9)|[689]\\d?)\\d{0,11}",cardtype:"diners"},{mask:"0000 0000 0000 0000",regex:"^(5[1-5]\\d{0,2}|22[2-9]\\d{0,1}|2[3-7]\\d{0,2})\\d{0,12}",cardtype:"mastercard"},{mask:"0000 000000 00000",regex:"^(?:2131|1800)\\d{0,11}",cardtype:"jcb15"},{mask:"0000 0000 0000 0000",regex:"^(?:35\\d{0,2})\\d{0,12}",cardtype:"jcb"},{mask:"0000 0000 0000 0000",regex:"^(?:5[0678]\\d{0,2}|6304|67\\d{0,2})\\d{0,12}",cardtype:"maestro"},{mask:"0000-0000-0000-0000",regex:"^220[0-4]\\d{0,12}",cardtype:"mir"},{mask:"0000 0000 0000 0000",regex:"^4\\d{0,15}",cardtype:"visa"},{mask:"0000 0000 0000 0000",regex:"^62\\d{0,14}",cardtype:"unionpay"},{mask:"0000 0000 0000 0000",cardtype:"Unknown"}],dispatch:function(appended,dynamicMasked){for(var number=(dynamicMasked.value+appended).replace(/\D/g,""),i=0;i<dynamicMasked.compiledMasks.length;i++){var re=new RegExp(dynamicMasked.compiledMasks[i].regex);if(null!=number.match(re))return dynamicMasked.compiledMasks[i]}}});console.log(new IMask.MaskedPattern);new IMask(expirationDate,{overwrite:!0,autofix:!0,mask:"MM{/}YY",blocks:{YY:{mask:IMask.MaskedRange,placeholderChar:"ГГ",from:0,to:99,maxLength:2},MM:{mask:IMask.MaskedRange,placeholderChar:"ММ",from:1,to:12,maxLength:2}}}),new IMask(securityCode,{mask:"000"})}});var validateAndSubmit=function(e,schemaKey){var formData=new FormData(e.target),formProps=Object.fromEntries(formData),validationResult=schemas[schemaKey].validate(formProps,{abortEarly:!1});if(console.log(validationResult),validationResult.error)return showValidationErrors(validationResult.error.details,e.target),void e.preventDefault()},showValidationErrors=function(errors,form){var inputs=Array.from(form.querySelectorAll("input"));inputs.forEach(function(input){var id=input.id,container=form.querySelector("#".concat(id+"_container"));hideValidationError(container)}),errors.forEach(function(error){var inputWithError=inputs.find(function(input){return input.id===error.context.key});if(inputWithError){var id=error.context.key,container=form.querySelector("#".concat(id+"_container"));console.log(container);var errorDiv=document.createElement("div");errorDiv.innerHTML=error.message,errorDiv.classList.add("error-text"),container.appendChild(errorDiv),container.classList.add("error"),inputWithError.addEventListener("input",function(){return hideValidationError(container)})}})},hideValidationError=function(container){if(container){container.classList.remove("error");var error=container.querySelector(".error-text");error&&container.removeChild(error)}},validateExpirationDate=function(value,helper){var values=value.split("/"),year=Number("20"+values[1]),month=Number(values[0]),currentDate=new Date,currentYear=currentDate.getFullYear(),currentMonth=currentDate.getMonth()+1;console.log(year,month,currentMonth,currentYear);var pastYear=year<currentYear;return console.log(currentMonth,currentYear),!pastYear&&!(year===currentYear&&month<currentMonth)||helper.message("Не может быть в прошлом!")},schemas={addNewForm:joi.object({cardNumber:joi.string().required().min(19).messages({"string.empty":"Обязательное поле","string.required":"Обязательное поле","string.min":"Слишком короткий номер карты"}),expirationDate:joi.string().required().custom(validateExpirationDate).messages({"string.empty":"Обязательное поле","string.required":"Обязательное поле","string.min":"Слишком короткий номер карты"}),securityCode:joi.string().required().max(3).messages({"string.empty":"Обязательное поле","string.required":"Обязательное поле","string.max":"Слишком длинный CVV/CVC!"})})},toggleModal=function(id){var modal=document.querySelector("#".concat(id));if(modal){var body=document.body;if(modal.classList.contains("show"))return body.style.overflow="auto",void modal.classList.remove("show");body.style.overflow="hidden",modal.classList.add("show")}},checkOutsideClick=function(e,id){e.target.id===id&&toggleModal(id)},editProfile=function(){var profileForm=document.getElementById("editProfileForm");profileForm.classList.toggle("edit"),profileForm.querySelectorAll("input").forEach(function(item){console.log(item.disabled),item.disabled?item.disabled=!1:item.disabled=!0})};function addToFavourite(btn,data){btn.classList.toggle("saved")}function addToCart(btn,data){btn.classList.toggle("saved")}function deleteFromCart(btn,data){toggleModal("removeCartItem")}function showFilters(btn,data){btn.classList.toggle("saved")}function showAllHits(btn,data){btn.classList.toggle("saved")}function toggleMobileOverlay(btn,data){btn.parentElement.classList.toggle("show")}